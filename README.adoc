:toc:
:toclevels: 4
= Shared Github Workflows

A collection of workflows and actions to use in (mostly java-based) projects.

== Core philosophy

Since this project provides both workflows and actions, we need to make the actions accessible.
For this, we clone this repository into the current run.
This requires that we always check out the actual repository of the action that should be built first and then check out the workflow repository into the existing working directory.

A typical workflow snippet might look like this:

.Typical workflow snippet to checkout the necessary repositores, and run an action
[source, yaml]
----
...
jobs:
  populate-cache:
    name: Populate Cache
    runs-on: ubuntu-latest

    steps:
      # This checks out the repository to build
      - name: Git checkout
        id: git-checkout
        uses: actions/checkout@v4

      # This checks out the shared workflows repository into directory
      # 'shared-github-workflows'
      - name: Git Checkout shared workflows
        id: git-checkout-shared-workflows
        uses: actions/checkout@v4
        with:
          path: shared-github-workflows
          repository: turing85/shared-github-workflows
          ref: main

      # This calls an action from the shared workflows repository
      - name: Populate Cache
        id: populate-cache
        # Notice this path, which is relative to the checked out
        # workflow repository
        uses: ./shared-github-workflows/.github/actions/java/maven/populate-cache
        with:
          graalvm-distribution: ${{ inputs.graalvm-distribution }}
          graalvm-version: ${{ inputs.graalvm-version }}
          java-version: ${{ inputs.java-version }}

          maven-opts: ${{ inputs.maven-opts-populate }}
          maven-targets: ${{ inputs.maven-targets-populate }}
...
----

include::.github/actions/README.adoc[leveloffset=+1]

== Contributors âœ¨

Thanks goes to these wonderful people (https://allcontributors.org/docs/en/emoji-key[emoji key]):

++++
<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<table>
  <tbody>
    <tr>
      <td align="center" valign="top" width="14.28%"><a href="https://turing85.github.io"><img src="https://avatars.githubusercontent.com/u/32584495?v=4?s=100" width="100px;" alt="Marco Bungart"/><br /><sub><b>Marco Bungart</b></sub></a><br /><a href="#code-turing85" title="Code">ðŸ’»</a> <a href="#maintenance-turing85" title="Maintenance">ðŸš§</a> <a href="#doc-turing85" title="Documentation">ðŸ“–</a></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-restore -->
<!-- prettier-ignore-end -->

<!-- ALL-CONTRIBUTORS-LIST:END -->
++++